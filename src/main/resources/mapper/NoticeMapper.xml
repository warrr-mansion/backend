<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.warrr.zipflex.api.notice.dao.NoticeDao">

	<!-- 공지사항 등록 -->
	<insert id="insertNotice"
		parameterType="com.warrr.zipflex.api.notice.dto.in.NoticeCreateRequestDto">
		INSERT INTO notice (title, content, regist_date)
		VALUES (#{title}, #{content}, #{registDate})
	</insert>

	<!-- 전체 공지사항 조회 -->
	<select id="findAll"
		resultType="com.warrr.zipflex.api.notice.dto.out.NoticeInfoResponseDto">
		SELECT id, title, content, regist_date
		FROM notice
		ORDER BY regist_date DESC
	</select>

	<!-- ID로 공지사항 조회 -->
	<select id="findById" parameterType="long"
		resultType="com.warrr.zipflex.api.notice.dto.out.NoticeInfoResponseDto">
		SELECT id, title, content, regist_date
		FROM notice
		WHERE id = #{id}
	</select>

	<!-- 공지사항 수정 -->
	<update id="updateNotice"
		parameterType="com.warrr.zipflex.api.notice.dto.in.NoticeUpdateRequestDto">
		UPDATE notice
		SET title = #{title}, content = #{content}, regist_date = #{registDate}
		WHERE id = #{id}
	</update>

	<!-- 공지사항 삭제 -->
	<delete id="deleteNotice" parameterType="long">
		DELETE FROM notice
		WHERE id = #{id}
	</delete>

	<!-- 조회수 증가 (현재 컬럼엔 view_count 없음. 필요 시 테이블에 추가) -->
	<!-- <update id="increaseViewCount" parameterType="long"> UPDATE notice 
		SET view_count = view_count + 1 WHERE id = #{id} </update> -->

</mapper>
